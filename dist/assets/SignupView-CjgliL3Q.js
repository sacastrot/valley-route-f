var P=Object.defineProperty;var F=(l,o,r)=>o in l?P(l,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[o]=r;var x=(l,o,r)=>(F(l,typeof o!="symbol"?o+"":o,r),r);import{d as C,s as L,c,b as e,t as f,n as _,o as d,p as I,i as U,k as M,a as V,r as k,w as T,e as v,v as g,f as u,g as z,h as S,F as D,x as R,_ as j}from"./index-CHpyDfGw.js";import{V as Z,E as q,U as G}from"./UserNameValidator-CmGyh7sg.js";import{u as H}from"./fetch-CQAJtwjE.js";const w=class w extends Z{validate(o){return w.regex.test(o)}validMessage(){return""}invalidMessage(){return"El nombre debe contener solo letras y espacios, máximo 50 caracteres"}};x(w,"regex",/^[a-zA-Z\s]*$/);let b=w;const J=l=>(I("data-v-288bb1a0"),l=l(),U(),l),K=J(()=>e("p",{class:"font-bold"},"Todo salió bien!",-1)),O={class:"block sm:inline"},Q=C({__name:"SuccessAlert",props:["message","show"],emits:["close"],setup(l,{emit:o}){const r=o;return L(()=>{setTimeout(()=>{r("close")},5e3)}),(N,h)=>(d(),c("div",{class:_(["alert bg-green-100/20 text-black p-4 px-[3rem] rounded absolute top-20 right-0 mt-4 mr-4 sm:w-[40rem] sm:fixed sm:z-50",{show:l.show}]),role:"alert"},[K,e("p",O,f(l.message),1)],2))}}),W=M(Q,[["__scopeId","data-v-288bb1a0"]]),n=l=>(I("data-v-a9c3194a"),l=l(),U(),l),X={class:"container mx-auto"},Y={class:"content-form w-[35rem]"},ee=n(()=>e("div",{class:"title text-center"},[e("h3",null,"Registrarse")],-1)),se=n(()=>e("div",{class:"spacer h-[2rem]"},null,-1)),ae={class:"input flex flex-col"},te=n(()=>e("label",{for:"email"},[e("p",null,"Correo electrónico")],-1)),oe={key:0,class:"text-red-200"},le=n(()=>e("label",{for:"firstName"},[e("p",{class:"mt-4"},"Nombre")],-1)),re={key:1,class:"text-red-200"},ie=n(()=>e("label",{for:"lastName"},[e("p",{class:"mt-4"},"Apellido")],-1)),ne={key:2,class:"text-red-200"},de=n(()=>e("label",{for:"password"},[e("p",{class:"mt-4"},"Contraseña")],-1)),me={class:"password"},ue=n(()=>e("i",{id:"iconPassword",class:"bi bi-eye-fill"},null,-1)),ce=[ue],pe=n(()=>e("div",{class:"h-[2rem]"},null,-1)),ve=C({__name:"SignupView",setup(l){const o=V(""),r=V(""),N=R(),h=async()=>{if(s.email===""||s.password===""||s.firstName===""||s.lastName===""){o.value="Por favor, rellene todos los campos";return}const m={email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName},{data:t,error:i}=await H("/auth",m);if(i.value!==""){o.value=i.value;return}if(t.value===null){o.value="",r.value="Usuario registrado correctamente",s.email="",s.password="",s.firstName="",s.lastName="",setTimeout(()=>{N.push({name:"login"})},2e3);return}},s=k({email:"",password:"",firstName:"",lastName:""}),a=k({username:{isValid:!0,message:""},name:{isValid:!0,message:""},lastName:{isValid:!0,message:""},password:{isValid:!0,message:""}}),y=new G,p=new b,$=()=>{y.validate(s.email)?(a.username.isValid=!0,a.username.message=""):(a.username.isValid=!1,a.username.message=y.invalidMessage())},A=()=>{p.validate(s.firstName)?(a.name.isValid=!0,a.name.message=""):(a.name.isValid=!1,a.name.message=p.invalidMessage())},B=()=>{p.validate(s.lastName)?(a.lastName.isValid=!0,a.lastName.message=""):(a.lastName.isValid=!1,a.lastName.message=p.invalidMessage())},E=()=>{const m=document.getElementById("password-input"),t=document.getElementById("iconPassword");m.type==="password"?(m.type="text",t.classList.remove("bi-eye-fill"),t.classList.add("bi-eye-slash-fill")):(m.type="password",t.classList.remove("bi-eye-slash-fill"),t.classList.add("bi-eye-fill"))};return(m,t)=>(d(),c(D,null,[e("div",X,[e("form",{onSubmit:t[4]||(t[4]=T(()=>{},["prevent"])),class:"flex items-center justify-center"},[e("div",Y,[ee,se,e("div",ae,[te,v(e("input",{id:"email",type:"email",class:_(["border border-gray-300 rounded px-5 py-3",{"border-red-200":!a.username.isValid}]),placeholder:"ejemplo@email.com","onUpdate:modelValue":t[0]||(t[0]=i=>s.email=i),onFocusout:$},null,34),[[g,s.email]]),a.username.message?(d(),c("p",oe,f(a.username.message),1)):u("",!0),le,v(e("input",{id:"firstName",type:"text",class:_(["border border-gray-300 rounded px-5 py-3",{"border-red-200":!a.name.isValid}]),placeholder:"Usuario","onUpdate:modelValue":t[1]||(t[1]=i=>s.firstName=i),onFocusout:A},null,34),[[g,s.firstName]]),a.username.message?(d(),c("p",re,f(a.name.message),1)):u("",!0),ie,v(e("input",{id:"lastName",type:"text",class:_(["border border-gray-300 rounded px-5 py-3",{"border-red-200":!a.lastName.isValid}]),placeholder:"Apellido","onUpdate:modelValue":t[2]||(t[2]=i=>s.lastName=i),onFocusout:B},null,34),[[g,s.lastName]]),a.lastName.message?(d(),c("p",ne,f(a.lastName.message),1)):u("",!0),de,e("div",me,[v(e("input",{type:"password",class:"border border-gray-300 rounded px-5 py-3",placeholder:"Contraseña","onUpdate:modelValue":t[3]||(t[3]=i=>s.password=i),id:"password-input"},null,512),[[g,s.password]]),e("div",{class:"btn-password",onClick:E},ce)]),pe,z(j,{text:"Registrarse",onClick:h})])])],32)]),o.value&&r.value===""?(d(),S(q,{key:0,show:o.value!=="",message:o.value,onClose:t[5]||(t[5]=i=>o.value="")},null,8,["show","message"])):u("",!0),r.value?(d(),S(W,{key:1,show:r.value!=="",message:r.value,onClose:t[6]||(t[6]=i=>r.value="")},null,8,["show","message"])):u("",!0)],64))}}),be=M(ve,[["__scopeId","data-v-a9c3194a"]]);export{be as default};
