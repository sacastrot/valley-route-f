var g=Object.defineProperty;var u=(a,e,t)=>e in a?g(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var r=(a,e,t)=>(u(a,typeof e!="symbol"?e+"":e,t),t);import{b as i,B as l,N}from"./api.service-lC_ScKpa.js";class m{constructor(e,t,n){r(this,"id");r(this,"description");r(this,"createdAt");r(this,"startNodeName","");r(this,"endNodeName","");r(this,"startNode",null);r(this,"endNode",null);r(this,"path",[]);r(this,"distance",0);this.id=e,this.description=t,this.createdAt=n}get created(){const e={0:"Enero",1:"Febrero",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre",10:"Noviembre",11:"Diciembre"},t=this.createdAt.getDate(),n=e[this.createdAt.getMonth()],o=this.createdAt.getFullYear();return`${t} de ${n} ${o}`}get startName(){var e;return((e=this.startNode)==null?void 0:e.name)||this.startNodeName}get endName(){var e;return((e=this.endNode)==null?void 0:e.name)||this.endNodeName}get distanceKm(){return(this.distance/1e3).toFixed(2)}}class c{constructor(e,t,n,o){r(this,"id");r(this,"lat");r(this,"lng");r(this,"name");this.id=e,this.lat=t,this.lng=n,this.name=o}}const b={getPackageList:w,getNodesList:p,createPackage:f,getPackage:_};async function w(a){try{const{data:e}=await i.get(`/packages?page=${a}`);return{list:e.data.map(n=>{const o=new Date(n.created_at),s=new m(n.id,n.description,o);return s.startNodeName=n.start_node,s.endNodeName=n.end_node,s}),pages:e.total_pages}}catch(e){throw e instanceof l?new Error("Intenta de nuevo más tarde"):new Error("Error al obtener la lista de paquetes")}}async function p(){try{const{data:a}=await i.get("/node");return a.map(t=>new c(t.id,t.lat,t.lng,t.name))}catch(a){throw a instanceof l?new Error("Intenta de nuevo más tarde"):new Error("Error al obtener la lista de nodos")}}async function f(a){try{await i.post("/package",a)}catch(e){if(e instanceof l)throw new Error("Intenta de nuevo más tarde")}}async function _(a){try{const{data:e}=await i.get(`/package/${a}`),t=new Date(e.created_at),n=new m(e.id,e.description,t),o=new c(e.start_node.id,e.start_node.lat,e.start_node.lng,e.start_node.name),s=new c(e.end_node.id,e.end_node.lat,e.end_node.lng,e.end_node.name),h=e.path.map(d=>new c(d.id,d.lat,d.lng,d.name));return n.startNode=o,n.endNode=s,n.path=h,n.distance=e.distance,n}catch(e){throw e instanceof N?new Error("No se encontró el paquete solicitado"):new Error("Intenta de nuevo más tarde")}}export{b as p};
