var h=Object.defineProperty;var m=(t,e,a)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var r=(t,e,a)=>(m(t,typeof e!="symbol"?e+"":e,a),a);import{g as i,C as l,N as w}from"./index-V9I3I4lh.js";class g{constructor(e,a,n){r(this,"id");r(this,"description");r(this,"createdAt");r(this,"startNodeName","");r(this,"endNodeName","");r(this,"startNode",null);r(this,"endNode",null);r(this,"path",[]);r(this,"distance",0);this.id=e,this.description=a,this.createdAt=n}get created(){return this.createdAt.toLocaleDateString()}get startName(){var e;return((e=this.startNode)==null?void 0:e.name)||this.startNodeName}get endName(){var e;return((e=this.endNode)==null?void 0:e.name)||this.endNodeName}get distanceKm(){return(this.distance/1e3).toFixed(2)}}class c{constructor(e,a,n,s){r(this,"id");r(this,"lat");r(this,"lng");r(this,"name");this.id=e,this.lat=a,this.lng=n,this.name=s}}const k={getPackageList:u,getNodesList:p,createPackage:f,getPackage:_};async function u(t){try{const{data:e}=await i.get(`/packages?page=${t}`);return{list:e.data.map(n=>{const s=new Date(n.created_at),o=new g(n.id,n.description,s);return o.startNodeName=n.start_node,o.endNodeName=n.end_node,o}),pages:e.total_pages}}catch(e){throw e instanceof l?new Error("Intenta de nuevo más tarde"):new Error("Error al obtener la lista de paquetes")}}async function p(){try{const{data:t}=await i.get("/node");return t.map(a=>new c(a.id,a.lat,a.lng,a.name))}catch(t){throw t instanceof l?new Error("Intenta de nuevo más tarde"):new Error("Error al obtener la lista de nodos")}}async function f(t){try{await i.post("/package",t)}catch(e){if(e instanceof l)throw new Error("Intenta de nuevo más tarde")}}async function _(t){try{const{data:e}=await i.get(`/package/${t}`),a=new Date(e.created_at),n=new g(e.id,e.description,a),s=new c(e.start_node.id,e.start_node.lat,e.start_node.lng,e.start_node.name),o=new c(e.end_node.id,e.end_node.lat,e.end_node.lng,e.end_node.name),N=e.path.map(d=>new c(d.id,d.lat,d.lng,d.name));return n.startNode=s,n.endNode=o,n.path=N,n.distance=e.distance,n}catch(e){throw e instanceof w?new Error("No se encontró el paquete solicitado"):new Error("Intenta de nuevo más tarde")}}export{k as p};
